IMPORTANT INSTRUCTIONS:
1. Provide your COMPLETE response in a single message - do not leave your analysis unfinished.
2. Address ALL parts of the question, prioritizing breadth of coverage over exhaustive depth.
3. Do not ask for clarification or additional information.
4. If you sense you might run out of time:
   - Focus first on identifying key differences or patterns in the code
   - Provide your most important insights about the code's structure and purpose
   - Ensure you address each part of the question at least briefly
5. Make explicit references to specific code elements or annotations when they inform your analysis.
6. State your assumptions clearly if aspects of the code are ambiguous or incomplete.

We need to implement a new feature in this system: user roles and permissions with different access levels.

Requirements:
- Support at least three role types: Admin, Manager, and User
- Each role should have different permission levels for operations
- Operations should check permissions before execution
- Support assigning multiple roles to a single user
- Maintain backward compatibility with existing code

Please:
1. Design the role and permission system
2. Show how to integrate it with the existing code
3. Implement all necessary new classes/methods
4. Modify existing code as needed to support permissions
5. Provide examples of how the new system would be used

Your implementation should follow the architectural patterns and style of the existing codebase.
